- name: Creates directory
  file:
    path: ~/{{item}}
    state: directory
  loop:
    - Dev
    - Junk
    - .dotfiles
    - .config/nvim

- name: Copy file with owner and permissions
  copy:
    src: files/{{item.src}}
    dest: ~/.dotfiles/{{item.dst}}
  loop:
    - { src: dotfiles/, dst: dotfiles/}
    - { src: nvim/, dst: nvim/}
    - { src: scripts/, dst: scripts/}

- name: Creates files
  file:
    path: ~/{{item}}
    state: touch
  loop:
    - .dotfiles/dotfiles/.variables

- name: Create a symbolic link
  file:
    src:  ~/.dotfiles/nvim/init.vim
    dest: ~/.config/nvim/init.vim
    state: link

- name: Add source dotfiles
  blockinfile:
    path: ~/.bashrc
    block: |
      source ~/.dotfiles/dotfiles/.variables
      source ~/.dotfiles/dotfiles/.aliases
      source ~/.dotfiles/dotfiles/.editor
      source ~/.dotfiles/dotfiles/.ssh-agent
      source ~/.dotfiles/scripts/fzf.sh
    marker: "# {mark} ANSIBLE MANAGED BLOCK"